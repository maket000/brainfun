<!doctype HTML>
<html>
  <head>
    <title>BrainF*n!</title>
    <script src="blockly/blockly_compressed.js"></script>
    <script src="blockly/blocks_compressed.js"></script>
    <script src="blockly/msg/js/en.js"></script>
    <script src="blockly/javascript_compressed.js"></script>
    <script src="blockly/blocks/brainfuck.js"></script>
    <script src="blockly/generators/javascript/brainfuck.js"></script>
    <script src="interp.js"></script>
    <style>
      * {
        font-family: "Comic Sans MS", "Comic Sans", cursive;
      }
    </style>
  </head>
  <body background="background.jpg">
    <font color="#FF00FF">
      <h1 bgcolor="#000000">BrainF*n</h1>
      <h4>BrainF*ck For Kids!</h4>
    </font>
    <button onclick="runCode()">Run code</button>
    <label>Input:</label><input id="bf-input"></input>
    <table id="numbers">
      <tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
    </table>
    <div id="blockdiv" style="height: 480px; width: 600px;" dir="LTR"></div>
    <div style="float: right; background-color: #FFFFFF; height: 480px; width: 600px; border-style: solid;"><p id="bf-out"></p></div>

    <xml id="toolbox" style="display: none">
      <block type="brack"></block>
      <block type="pt_inc"></block>
      <block type="pt_dec"></block>
      <block type="bt_inc"></block>
      <block type="bt_dec"></block>
      <block type="bf_out"></block>
      <block type="bf_in"></block>
      <block type="pt_inc_c"></block>
      <block type="pt_dec_c"></block>
      <block type="bt_inc_c"></block>
      <block type="bt_dec_c"></block>
      <block type="bf_out_c"></block>
      <block type="bf_in_c"></block>
      
    </xml>
  </body>
 
  <script>
    var workspace = Blockly.inject('blockdiv',
    {toolbox: document.getElementById('toolbox')});

    function runCode() {
        Blockly.JavaScript.INFINITE_LOOP_TRAP = null;
        var code = Blockly.JavaScript.workspaceToCode(workspace);
        code = code.replace(/ /g,'');
        input = document.getElementById("bf-input").value;
        result = interp(code, input);
        document.getElementById("bf-out").innerHTML = result;
    }
  </script>
</html>
